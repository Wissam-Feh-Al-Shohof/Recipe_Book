(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"7Lvj":function(e,t,i){"use strict";i.r(t),i.d(t,"RecipesModule",function(){return S});var r=i("3Pt+"),n=i("tyNb"),c=i("fXoL"),o=i("DBWA"),s=i("ofXK");const b=function(e){return[e]};let a=(()=>{class e{constructor(e){this.recipesService=e}onSelected(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.Gb(o.a))},e.\u0275cmp=c.Ab({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",id:"id"},decls:8,vars:7,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"img-responsive",2,"max-height","50px",3,"src","alt"]],template:function(e,t){1&e&&(c.Jb(0,"a",0),c.Jb(1,"div",1),c.Jb(2,"h4",2),c.dc(3),c.Ib(),c.Jb(4,"p",3),c.dc(5),c.Ib(),c.Ib(),c.Jb(6,"span",4),c.Hb(7,"img",5),c.Ib(),c.Ib()),2&e&&(c.Tb("routerLink",c.Wb(5,b,t.id)),c.wb(3),c.ec(t.recipe.name),c.wb(2),c.ec(t.recipe.description),c.wb(2),c.Ub("alt",t.recipe.name),c.Tb("src",t.recipe.imagePath,c.ac))},directives:[n.f,n.e],styles:[""]}),e})();function p(e,t){if(1&e&&c.Hb(0,"app-recipe-item",4),2&e){const e=t.$implicit;c.Tb("id",t.index)("recipe",e)}}const d=function(){return["new"]};let u=(()=>{class e{constructor(e){this.recipesService=e,this.recipes=[]}ngOnInit(){this.recipes=this.recipesService.getRecipe(),this.subscription=this.recipesService.recipesChanged.subscribe(e=>{this.recipes=e})}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Gb(o.a))},e.\u0275cmp=c.Ab({type:e,selectors:[["app-recipe-list"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"routerLink"],[3,"id","recipe",4,"ngFor","ngForOf"],[3,"id","recipe"]],template:function(e,t){1&e&&(c.Jb(0,"div",0),c.Jb(1,"div",1),c.Jb(2,"button",2),c.dc(3,"New Recipe"),c.Ib(),c.Ib(),c.Ib(),c.Hb(4,"hr"),c.Jb(5,"div",0),c.Jb(6,"div",1),c.cc(7,p,1,2,"app-recipe-item",3),c.Ib(),c.Ib()),2&e&&(c.wb(2),c.Tb("routerLink",c.Vb(2,d)),c.wb(5),c.Tb("ngForOf",t.recipes))},directives:[n.d,s.h,a],styles:[""]}),e})(),l=(()=>{class e{constructor(e){this.recipesService=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.Gb(o.a))},e.\u0275cmp=c.Ab({type:e,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row",2,"background-color","#f7f7b3"],[1,"col-md-4"],[1,"col-md-8"]],template:function(e,t){1&e&&(c.Jb(0,"div",0),c.Jb(1,"div",1),c.Hb(2,"app-recipe-list"),c.Ib(),c.Jb(3,"div",2),c.Hb(4,"router-outlet"),c.Ib(),c.Ib())},directives:[u,n.h],styles:[""]}),e})();function m(e,t){if(1&e){const e=c.Kb();c.Jb(0,"div",18),c.Jb(1,"div",19),c.Hb(2,"input",20),c.Ib(),c.Jb(3,"div",21),c.Hb(4,"input",22),c.Ib(),c.Jb(5,"div",21),c.Jb(6,"button",23),c.Qb("click",function(){c.Zb(e);const i=t.index;return c.Sb().onDeleteIngredient(i)}),c.dc(7,"x"),c.Ib(),c.Ib(),c.Ib()}2&e&&c.Tb("formGroupName",t.index)}let h=(()=>{class e{constructor(e,t,i){this.route=e,this.recipesService=t,this.router=i,this.editMode=!1,this.conf=!1}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.editMode=!0,this.id=+e.id,this.recipe=this.recipesService.getRecipeId(this.id)),this.initForm()}),this.subscription=this.recipesService.recipesChanged.subscribe(e=>{this.recipe=e[this.id]})}onSubmit(){this.conf=!0,this.editMode?this.recipesService.updateRecipe(this.id,this.recipeForm.value):this.recipesService.addRecipe(this.recipeForm.value),this.router.navigate([this.editMode?"../..":".."],{relativeTo:this.route})}onCancel(){this.conf=!0,this.router.navigate([this.editMode?"../..":".."],{relativeTo:this.route})}initForm(){let e="",t="",i="",n=new r.b([]);if(this.editMode){const c=this.recipe;if(e=c.name,t=c.imagePath,i=c.description,c.ingredients)for(let e of c.ingredients)n.push(new r.f({name:new r.d(e.name,r.r.required),amount:new r.d(e.amount,[r.r.required,r.r.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new r.f({name:new r.d(e,r.r.required),description:new r.d(i,r.r.required),imagePath:new r.d(t,r.r.required),ingredients:n})}onDeleteIngredient(e){this.recipeForm.get("ingredients").removeAt(e)}onAddIngredient(){this.recipeForm.get("ingredients").push(new r.f({name:new r.d(null,r.r.required),amount:new r.d(null,[r.r.required,r.r.pattern(/^[1-9]+[0-9]*$/)])}))}canDeactivate(){const e=this.recipeForm,t=e.get("name").value!==this.recipe.name,i=e.get("imagePath").value!==this.recipe.imagePath,r=e.get("description").value!==this.recipe.description;return!((t||i||r)&&!this.conf)||confirm("Are you sure you want to leave without saving?")}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Gb(n.a),c.Gb(o.a),c.Gb(n.c))},e.\u0275cmp=c.Ab({type:e,selectors:[["app-recipe-edit"]],decls:31,vars:5,consts:[[1,"container"],[1,"form-group",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-7"],["type","submit","name","button",1,"btn","btn-success",3,"disabled"],["type","button","name","button",1,"btn","btn-danger",3,"click"],[1,"col-md-8"],[1,"form-group"],["for","name"],["type","text","id","name","value","","formControlName","name",1,"form-control"],["name",""],["type","text","id","imagePath","value","","formControlName","imagePath",1,"form-control"],[1,"img-responsive",2,"max-height","200px",3,"src","alt"],["for","description"],["id","description","rows","4","formControlName","description",1,"form-control"],["type","button",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],["formArrayName","ingredients",1,"form-group"],["style","margin-top:10px;","class","row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-md-6"],["type","text","formControlName","name",1,"form-control"],[1,"col-md-2"],["type","text","value","","formControlName","amount",1,"form-control"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){if(1&e&&(c.Jb(0,"div",0),c.Jb(1,"form",1),c.Qb("ngSubmit",function(){return t.onSubmit()}),c.Jb(2,"div",2),c.Jb(3,"div",3),c.Jb(4,"button",4),c.dc(5,"Save"),c.Ib(),c.Jb(6,"button",5),c.Qb("click",function(){return t.onCancel()}),c.dc(7,"Cancel"),c.Ib(),c.Ib(),c.Ib(),c.Jb(8,"div",2),c.Jb(9,"div",6),c.Jb(10,"div",7),c.Jb(11,"label",8),c.dc(12," Recipe name: "),c.Ib(),c.Hb(13,"input",9,10),c.Ib(),c.Jb(15,"div",7),c.Jb(16,"label",8),c.dc(17," Image path: "),c.Ib(),c.Hb(18,"input",11),c.Hb(19,"img",12),c.Ib(),c.Jb(20,"div",7),c.Jb(21,"label",13),c.dc(22," Recipe description: "),c.Ib(),c.Hb(23,"textarea",14),c.Ib(),c.Jb(24,"div",6),c.Jb(25,"button",15),c.Qb("click",function(){return t.onAddIngredient()}),c.dc(26," Add Ingredient"),c.Ib(),c.Hb(27,"br"),c.Hb(28,"br"),c.Ib(),c.Jb(29,"div",16),c.cc(30,m,8,1,"div",17),c.Ib(),c.Ib(),c.Ib(),c.Ib(),c.Ib()),2&e){const e=c.Yb(14);c.wb(1),c.Tb("formGroup",t.recipeForm),c.wb(3),c.Tb("disabled",t.recipeForm.invalid),c.wb(15),c.Tb("src",t.recipeForm.get("imagePath").value,c.ac)("alt",e.value),c.wb(11),c.Tb("ngForOf",t.recipeForm.get("ingredients").controls)}},directives:[r.s,r.k,r.g,r.a,r.j,r.e,r.c,s.h,r.h],styles:["p[_ngcontent-%COMP%]{font-size:120%}input.ng-touched.ng-invalid[_ngcontent-%COMP%], textarea.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid red}"]}),e})();var g=i("3V6w");function v(e,t){if(1&e&&(c.Jb(0,"li",12),c.dc(1),c.Ib()),2&e){const e=t.$implicit;c.wb(1),c.gc(" ",e.name," (",e.amount,")")}}let f=(()=>{class e{constructor(e,t,i){this.recipesService=e,this.route=t,this.router=i}ngOnInit(){this.route.params.subscribe(e=>{this.recipe=this.recipesService.getRecipeId(+e.id),this.id=+e.id})}addIngredients(){this.recipesService.addIngredients(this.recipe.ingredients)}onEdit(){this.router.navigate(["../",this.id,"edit"],{relativeTo:this.route})}onDelete(){this.recipesService.onDelete(this.id),this.router.navigate(["../"])}}return e.\u0275fac=function(t){return new(t||e)(c.Gb(o.a),c.Gb(n.a),c.Gb(n.c))},e.\u0275cmp=c.Ab({type:e,selectors:[["app-recipe-details"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["appDropdown","",1,"btn-group"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[2,"cursor","pointer",3,"click"],[3,"click"],[2,"cursor","pointer"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(e,t){1&e&&(c.Jb(0,"div",0),c.Jb(1,"div",1),c.Hb(2,"img",2),c.Ib(),c.Ib(),c.Jb(3,"div",0),c.Jb(4,"div",1),c.Jb(5,"h1"),c.dc(6),c.Ib(),c.Ib(),c.Ib(),c.Jb(7,"div",0),c.Jb(8,"div",1),c.Jb(9,"div",3),c.Jb(10,"button",4),c.dc(11," Manage the recipe "),c.Hb(12,"span",5),c.Ib(),c.Jb(13,"ul",6),c.Jb(14,"li"),c.Jb(15,"a",7),c.Qb("click",function(){return t.addIngredients()}),c.dc(16,"Add ingredients to the shopping list"),c.Ib(),c.Ib(),c.Jb(17,"li",8),c.Qb("click",function(){return t.onEdit()}),c.Jb(18,"a",9),c.dc(19,"Edit Recipe"),c.Ib(),c.Ib(),c.Jb(20,"li"),c.Jb(21,"a",7),c.Qb("click",function(){return t.onDelete()}),c.dc(22,"Delete Recipe"),c.Ib(),c.Ib(),c.Ib(),c.Ib(),c.Ib(),c.Ib(),c.Jb(23,"div",0),c.Jb(24,"div",1),c.dc(25),c.Ib(),c.Ib(),c.Jb(26,"div",0),c.Jb(27,"div",1),c.Jb(28,"ul",10),c.cc(29,v,2,2,"li",11),c.Ib(),c.Ib(),c.Ib()),2&e&&(c.wb(2),c.Ub("src",t.recipe.imagePath,c.ac),c.Tb("alt",t.recipe.name),c.wb(4),c.ec(t.recipe.name),c.wb(19),c.fc(" ",t.recipe.description," "),c.wb(4),c.Tb("ngForOf",t.recipe.ingredients))},directives:[g.a,s.h],styles:[""]}),e})(),I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Ab({type:e,selectors:[["app-empty-recipe"]],decls:3,vars:0,consts:[[1,"col-md-8"],[2,"font-size","230%"]],template:function(e,t){1&e&&(c.Jb(0,"div",0),c.Jb(1,"p",1),c.dc(2,"Please select a recipe!"),c.Ib(),c.Ib())},styles:[""]}),e})();var J=i("qXBG");let w=(()=>{class e{constructor(e){this.auth=e}canActivate(e,t){return this.auth.isAuthenticated()}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(J.a))},e.\u0275prov=c.Cb({token:e,factory:e.\u0275fac}),e})();var y=i("3B9U");const x=[{path:"",component:l,children:[{path:"",component:I},{path:"new",component:h,canActivate:[w]},{path:":id",component:f},{path:":id/edit",component:h,canActivate:[w],canDeactivate:[y.a]}]}];let k=(()=>{class e{}return e.\u0275mod=c.Eb({type:e}),e.\u0275inj=c.Db({factory:function(t){return new(t||e)},providers:[w],imports:[[n.g.forChild(x)],n.g]}),e})();var F=i("PCNd");let S=(()=>{class e{}return e.\u0275mod=c.Eb({type:e}),e.\u0275inj=c.Db({factory:function(t){return new(t||e)},imports:[[k,r.p,F.a]]}),e})()}}]);